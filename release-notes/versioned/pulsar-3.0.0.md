---
id: pulsar-3.0.0
title: Apache Pulsar 3.0.0
sidebar_label: Apache Pulsar 3.0.0
---

#### 2023-05-02

### Important notice

- Upgrade the rocksdb version to 7.9.2 to keep sync with bookkeeper's rocksdb dependency in [#20072](https://github.com/apache/pulsar/pull/20072)
- Introduce consistent hash ring to distribute the load of multiple topics subscription in [#19502](https://github.com/apache/pulsar/pull/19502)
- Remove default 30s acktimeout when setting dlq policy on java consumer in [#19486](https://github.com/apache/pulsar/pull/19486)
- Require authrole is proxyrole to set originalprincipal in [#19455](https://github.com/apache/pulsar/pull/19455)
- Update elasticsearch sink idle cnx timeout to 30s in [#19377](https://github.com/apache/pulsar/pull/19377)
- Move checked exception into builder when newtransaction. in [#19356](https://github.com/apache/pulsar/pull/19356)
- Tokenauthenticationstate: authenticate token only once in [#19314](https://github.com/apache/pulsar/pull/19314)
- Onestageauth state: move authn out of constructor in [#19295](https://github.com/apache/pulsar/pull/19295)
- Update authenticationprovider to simplify http authn in [#19197](https://github.com/apache/pulsar/pull/19197)
- Remove authorizationprovider methods deprecated in 2.7 and 2.9 in [#19182](https://github.com/apache/pulsar/pull/19182)
- Deprecate blocking authorizationservice, authorizationprovider methods in [#19180](https://github.com/apache/pulsar/pull/19180)
- Reject create non existent persistent partitions. in [#19086](https://github.com/apache/pulsar/pull/19086)
- Omit making a copy of commandack when there are no broker interceptors in [#18997](https://github.com/apache/pulsar/pull/18997)
- Use correct file path for tls trust certificates in [#18712](https://github.com/apache/pulsar/pull/18712)
- Enable certificate refresh for quorum and netty servers in [#18097](https://github.com/apache/pulsar/pull/18097)
- Remove timestamp from prometheus metrics in [#17419](https://github.com/apache/pulsar/pull/17419)
- Revert 5895: fix redeliverycount in [#17060](https://github.com/apache/pulsar/pull/17060)
- Fix producer/consume permission canâ€™t get v1/schema in [#16018](https://github.com/apache/pulsar/pull/16018)
- Autorecovery default reppdnsresolverclass to zkbookierackaffinitymapping in [#15640](https://github.com/apache/pulsar/pull/15640)


### PIPs

- PIP-160 Metrics stats of Transaction buffered writer [#15370](https://github.com/apache/pulsar/issues/15370)
- PIP-167 Make it Configurable to Require Subscription Permission [#15576](https://github.com/apache/pulsar/pull/15576)
- PIP-169 Support split bundle by flow or qps [#16782](https://github.com/apache/pulsar/pull/16782)
- PIP-188: Cluster migration or Blue-Green cluster deployment support in Pulsar [#16551]((https://github.com/apache/pulsar/pull/16551))
- PIP-192: New Pulsar Broker Load Balancer [#16691](https://github.com/apache/pulsar/pull/16691)
- PIP-214: Add broker level metrics statistics and expose to prometheus [#18056](https://github.com/apache/pulsar/pull/18056)
- PIP-218: Consumer batchReceive() single partition every receive [#18182](https://github.com/apache/pulsar/pull/18182)
- PIP-229: Add a common interface to get fields of the MessageIdData #18950(https://github.com/apache/pulsar/pull/18950)
- PIP-250: Add proxyVersion to CommandConnect #19623(https://github.com/apache/pulsar/pull/19623)
- PIP-257: Add Open ID Connect Support to Server Components [#19771](https://github.com/apache/pulsar/pull/19771)

### Broker
- [Broker] incomplete PIP-97: Asynchronous Authentication Provider [#12105](https://github.com/apache/pulsar/pull/12105)
  - [Broker] implement for servercnx by @michaeljmarshall in [#19409](https://github.com/apache/pulsar/pull/19409)
  - [Broker] implement for proxyconnection by @michaeljmarshall in [#19292](https://github.com/apache/pulsar/pull/19292)
- [Broker] incomplete PIP-180: Shadow Topic, an alternative way to support readonly topic ownership. [#16153](https://github.com/apache/pulsar/pull/16153)
  - [Broker] add shadowmanagedledgerimpl by @jason918 in [#18265](https://github.com/apache/pulsar/pull/18265)
  - [Broker] support shadow topic creation. by @jason918 in [#17711](https://github.com/apache/pulsar/pull/17711)
  - [Broker] add shadow replicator by @jason918 in [#17371](https://github.com/apache/pulsar/pull/17371)
- [Broker] Pip-169: support split bundle by flow or qps by @lordcheng10 in [#16557](https://github.com/apache/pulsar/pull/16557)
- [Broker] incomplete Pip-188 support blue-green cluster migration [part-1] by @rdhabalia in [#17962](https://github.com/apache/pulsar/pull/17962)
- [Broker] PIP-192: New Pulsar Broker Load Balancer [#16691](https://github.com/apache/pulsar/pull/16691)
  - [Broker] fix getlastmessageid for compressed payload(and add compression and maxbatchsize for the load balance system topic) by @heesung-sn in [#20087](https://github.com/apache/pulsar/pull/20087)
  - [Broker] improve transfersheder for overload outlier for large clusters by @heesung-sn in [#20059](https://github.com/apache/pulsar/pull/20059)
  - [Broker] update the lookup data path to support deploy and rollback by @demogorgon314 in [#19999](https://github.com/apache/pulsar/pull/19999)
  - [Broker] filter the transfer dest broker by @demogorgon314 in [#19958](https://github.com/apache/pulsar/pull/19958)
  - [Broker] updated metrics and cleanup broker selector by @heesung-sn in [#19945](https://github.com/apache/pulsar/pull/19945)
  - [Broker] support delete namespace bundle admin api by @demogorgon314 in [#19851](https://github.com/apache/pulsar/pull/19851)
  - [Broker] improved auto unload logic by @heesung-sn in [#19813](https://github.com/apache/pulsar/pull/19813)
  - [Broker] support broker isolation policy by @demogorgon314 in [#19592](https://github.com/apache/pulsar/pull/19592)
  - [Broker] add large topic count filter by @demogorgon314 in [#19613](https://github.com/apache/pulsar/pull/19613)
  - [Broker] added versionid in serviceunitstatedata by @heesung-sn in [#19620](https://github.com/apache/pulsar/pull/19620)
  - [Broker] added deleted and init states in serviceunitstate by @heesung-sn in [#19546](https://github.com/apache/pulsar/pull/19546)
  - [Broker] added broker and top-bundles load reporters by @heesung-sn in [#19471](https://github.com/apache/pulsar/pull/19471)
  - [Broker] added transfershedder by @heesung-sn in [#18865](https://github.com/apache/pulsar/pull/18865)
  - [Broker] added serviceunitstatecompactionstrategy by @heesung-sn in [#19045](https://github.com/apache/pulsar/pull/19045)
  - [Broker] added topiccompactionstrategy for strategictwophasecompactor and tableview. by @heesung-sn in [#18195](https://github.com/apache/pulsar/pull/18195)
  - [Broker] implement load data store by @demogorgon314 in [#18777](https://github.com/apache/pulsar/pull/18777)
  - [Broker] implement broker registry for new load manager by @demogorgon314 in [#18810](https://github.com/apache/pulsar/pull/18810)
  - [Broker] added serviceunitstatechannelimpl by @heesung-sn in [#18489](https://github.com/apache/pulsar/pull/18489)
- [Broker] Pip-214 add broker level metrics statistics and expose to prometheus by @yyj8 in [#19047](https://github.com/apache/pulsar/pull/19047)
- [Broker] incomplete Pip-240: new public method unloadsubscription in persistenttopic by @poorbarcode in [#19737](https://github.com/apache/pulsar/pull/19737)
- [Broker] Pip-250: add proxyversion to commandconnect by @michaeljmarshall in [#19618](https://github.com/apache/pulsar/pull/19618)
- [Broker] Pip-257: add authenticationprovideropenid by @michaeljmarshall in [#19849](https://github.com/apache/pulsar/pull/19849)
- [Broker] Make `leastresourceusagewithweight` thread safe by @lifepuzzlefun in [#20159](https://github.com/apache/pulsar/pull/20159)
- [Broker] Support disabling delayed bucket merging. by @mattisonchao in [#20155](https://github.com/apache/pulsar/pull/20155)
- [Broker] Supply download auth params when provided for k8s runtime by @michaeljmarshall in [#20144](https://github.com/apache/pulsar/pull/20144)
- [Broker] Authenticationprovideropenid k8s error logs by @michaeljmarshall in [#20135](https://github.com/apache/pulsar/pull/20135)
- [Broker] Implement authenticateasync for authenticationproviderlist by @michaeljmarshall in [#20132](https://github.com/apache/pulsar/pull/20132)
- [Broker] Fix broker restart logic by @wolfstudy in [#20113](https://github.com/apache/pulsar/pull/20113)
- [Broker] Ensure previous delayed index be removed from snapshotsegmentlastindextable & make load operate asynchronous by @coderzc in [#20086](https://github.com/apache/pulsar/pull/20086)
- [Broker] Fix avoid future of clear delayed message can't complete by @coderzc in [#20075](https://github.com/apache/pulsar/pull/20075)
- [Broker] Refresh auth data if proxylookuprequests by @michaeljmarshall in [#20067](https://github.com/apache/pulsar/pull/20067)
- [Broker] Fix flaky testcreatetopicwithzombiereplicatorcursor by @bewaremypower in [#20037](https://github.com/apache/pulsar/pull/20037)
- [Broker] Prevent range conflicts with key shared sticky consumers when tcp/ip connections get orphaned by @lhotari in [#20026](https://github.com/apache/pulsar/pull/20026)
- [Broker] Fix leader broker log by @nicoloboschi in [#19987](https://github.com/apache/pulsar/pull/19987)
- [Broker] Make ledgeroffloaderfactory can load the old nar. by @horizonzy in [#19913](https://github.com/apache/pulsar/pull/19913)
- [Broker] Ignore and remove the replicator cursor when the remote cluster is absent by @bewaremypower in [#19972](https://github.com/apache/pulsar/pull/19972)
- [Broker] Fix deadletterproducer creation callback blocking client io thread. by @lifepuzzlefun in [#19930](https://github.com/apache/pulsar/pull/19930)
- [Broker] Merge multiple buckets at once by @coderzc in [#19927](https://github.com/apache/pulsar/pull/19927)
- [Broker] Fix the loss of bundle stats data reported to zookeeper, when the updatestats method is executed by @lordcheng10 in [#19887](https://github.com/apache/pulsar/pull/19887)
- [Broker] Clear delayed message when unsubscribe &  make clear operation asynchronous by @coderzc in [#19901](https://github.com/apache/pulsar/pull/19901)
- [Broker] Fix can't send errorcommand when message is null value by @coderzc in [#19899](https://github.com/apache/pulsar/pull/19899)
- [Broker] Make bucket merge operation asynchronous by @coderzc in [#19873](https://github.com/apache/pulsar/pull/19873)
- [Broker] Suppress error logging when message expiration fails by @massakam in [#19778](https://github.com/apache/pulsar/pull/19778)
- [Broker] Allow proxy to pass same role for authrole and originalrole by @michaeljmarshall in [#19557](https://github.com/apache/pulsar/pull/19557)
- [Broker] Make authentication refresh threadsafe  by @michaeljmarshall in [#19506](https://github.com/apache/pulsar/pull/19506)
- [Broker] Fix retentionpolicies constructor by @nodece in [#19777](https://github.com/apache/pulsar/pull/19777)
- [Broker] Add metrics for bucket delayed message tracker by @coderzc in [#19716](https://github.com/apache/pulsar/pull/19716)
- [Broker] Add topicname and cursorname for ledger metadata of bucket snapshot by @coderzc in [#19802](https://github.com/apache/pulsar/pull/19802)
- [Broker] Don't clean up bucketdelayeddeliverytracker when all consumer disconnect by @coderzc in [#19801](https://github.com/apache/pulsar/pull/19801)
- [Broker] Fix create cluster with empty url by @nodece in [#19762](https://github.com/apache/pulsar/pull/19762)
- [Broker] Fix potential exception cause the policy service init fail. by @technoboy- in [#19746](https://github.com/apache/pulsar/pull/19746)
- [Broker] Validate originalprincipal earlier in servercnx by @michaeljmarshall in [#19270](https://github.com/apache/pulsar/pull/19270)
- [Broker] Fix issue where msgrateexpired may not refresh forever by @massakam in [#19759](https://github.com/apache/pulsar/pull/19759)
- [Broker] Fix index generator is not rollback after entries are failed added. by @gaozhangmin in [#19727](https://github.com/apache/pulsar/pull/19727)
- [Broker] Cut off snapshot segment according to maxindexesperbucketsnapshotsegment by @coderzc in [#19706](https://github.com/apache/pulsar/pull/19706)
- [Broker] Change type of `allowautotopiccreationtype` to topictype by @yuruguo in [#18814](https://github.com/apache/pulsar/pull/18814)
- [Broker] Store the original authentication data by @nodece in [#19519](https://github.com/apache/pulsar/pull/19519)
- [Broker] Getlastmessageid returns a wrong batch index of last message if enabled read compacted by @poorbarcode in [#18877](https://github.com/apache/pulsar/pull/18877)
- [Broker] Embed stringified exception in placeholder in log message by @massakam in [#19633](https://github.com/apache/pulsar/pull/19633)
- [Broker] Fix bucketdelayeddeliverytracker merge issues by @coderzc in [#19615](https://github.com/apache/pulsar/pull/19615)
- [Broker] Make bucketdelayeddeliverytracker can retry snapshot operation & improve logs by @coderzc in [#19577](https://github.com/apache/pulsar/pull/19577)
- [Broker] Fix geo-replication admin by @nodece in [#19548](https://github.com/apache/pulsar/pull/19548)
- [Broker] Transaction buffer recover blocked by readnext by @poorbarcode in [#18833](https://github.com/apache/pulsar/pull/18833)
- [Broker] Export `pulsar_delayed_message_index_size_bytes` in subscription level by @coderzc in [#19595](https://github.com/apache/pulsar/pull/19595)
- [Broker] Counter of pending send messages in replicator incorrect if schema future not complete by @poorbarcode in [#19242](https://github.com/apache/pulsar/pull/19242)
- [Broker] Store nonblank clientversions that have spaces by @michaeljmarshall in [#19616](https://github.com/apache/pulsar/pull/19616)
- [Broker] Print stack trace when got excpetion in servercnx by @wangjialing218 in [#19593](https://github.com/apache/pulsar/pull/19593)
- [Broker] Require authrole is proxyrole to set originalprincipal by @michaeljmarshall in [#19455](https://github.com/apache/pulsar/pull/19455)
- [Broker] Make the service name resolver cache of pulsarwebresource expire after access by @poorbarcode in [#19532](https://github.com/apache/pulsar/pull/19532)
- [Broker] Onestageauth state: move authn out of constructor by @michaeljmarshall in [#19295](https://github.com/apache/pulsar/pull/19295)
- [Broker] Forbid uploading bytes schema with admin api by @labuladong in [#18995](https://github.com/apache/pulsar/pull/18995)
- [Broker] Add test to verify authrole cannot change by @michaeljmarshall in [#19430](https://github.com/apache/pulsar/pull/19430)
- [Broker] Topic load fail by ledger lost by @poorbarcode in [#19444](https://github.com/apache/pulsar/pull/19444)
- [Broker] Terminate the async call chain when the condition isn't met for resetcursor by @lhotari in [#19541](https://github.com/apache/pulsar/pull/19541)
- [Broker] Make servercnx#originalauthdata volatile by @michaeljmarshall in [#19507](https://github.com/apache/pulsar/pull/19507)
- [Broker] Cleanup finalposition null-check in asyncfindposition by @anonhxy in [#19497](https://github.com/apache/pulsar/pull/19497)
- [Broker] Servercnx: go to failed state when auth fails by @michaeljmarshall in [#19312](https://github.com/apache/pulsar/pull/19312)
- [Broker] Refactor update topic partitions endpoint. by @mattisonchao in [#19166](https://github.com/apache/pulsar/pull/19166)
- [Broker] Fix mutex never released when trimming by @315157973 in [#17911](https://github.com/apache/pulsar/pull/17911)
- [Broker] Fix delete system topic clean topic policy by @liangyepianzhou in [#18823](https://github.com/apache/pulsar/pull/18823)
- [Broker] Support zookeeper read-only config. by @horizonzy in [#19156](https://github.com/apache/pulsar/pull/19156)
- [Broker] Modify check waitingforpingresponse with volatile (#12615)" by @michaeljmarshall in [#19439](https://github.com/apache/pulsar/pull/19439)
- [Broker] Expect msgs after server initiated closeproducer by @michaeljmarshall in [#19446](https://github.com/apache/pulsar/pull/19446)
- [Broker] Close transactionbuffer after messagededuplication#checkstatus failed by @tjiuming in [#19157](https://github.com/apache/pulsar/pull/19157)
- [Broker] Topic could be in fenced state forever if deletion fails by @nicoloboschi in [#19129](https://github.com/apache/pulsar/pull/19129)
- [Broker] Fix the incorrect total size if use ml interceptor by @poorbarcode in [#19404](https://github.com/apache/pulsar/pull/19404)
- [Broker] Implement bucketdelayeddeliverytrackerfactory and load bucketdelayeddeliverytracker - part6 by @coderzc in [#17756](https://github.com/apache/pulsar/pull/17756)
- [Broker] Fix currency bug in bucketdelayeddeliverytracker#recoverbucketsnapshot by @lhotari in [#19394](https://github.com/apache/pulsar/pull/19394)
- [Broker] Added isactive in managedcursorimpl by @heesung-sn in [#19341](https://github.com/apache/pulsar/pull/19341)
- [Broker] Replace sync method in async call chain of internalsetbacklogquota by @lhotari in [#19398](https://github.com/apache/pulsar/pull/19398)
- [Broker] Replace sync call in async call chain of adminresource#internalcreatepartitionedtopic by @lhotari in [#19399](https://github.com/apache/pulsar/pull/19399)
- [Broker] Reduce calls on metadata store / zk event thread & netty threads in persistenttopic by @lhotari in [#19388](https://github.com/apache/pulsar/pull/19388)
- [Broker] Release netty buffer in finally block in servercnx#handlelastmessageidfromcompactedledger by @lhotari in [#19395](https://github.com/apache/pulsar/pull/19395)
- [Broker] Replace sync method in namespacesbase#internaldeletenamespacebundleasync by @lhotari in [#19391](https://github.com/apache/pulsar/pull/19391)
- [Broker] Fix concurrency bug in persistenttopicsbase#internalgetreplicatedsubscriptionstatus by @lhotari in [#19389](https://github.com/apache/pulsar/pull/19389)
- [Broker] Remove synchronous method call in async call chain in persistenttopicsbase by @lhotari in [#19387](https://github.com/apache/pulsar/pull/19387)
- [Broker] Update interceptor handler exception by @tuteng in [#18940](https://github.com/apache/pulsar/pull/18940)
- [Broker] Add lowerboundarysheddingenabled conf by @crossoverjie in [#19351](https://github.com/apache/pulsar/pull/19351)
- [Broker] Fix uncompleted future when get the topic policies of  a deleted topic by @liangyepianzhou in [#18824](https://github.com/apache/pulsar/pull/18824)
- [Broker] Catch exception for brokerinterceptor by @aloyszhang in [#19147](https://github.com/apache/pulsar/pull/19147)
- [Broker] Simplify extract entrymetadata code in filterentriesforconsumer by @lifepuzzlefun in [#18729](https://github.com/apache/pulsar/pull/18729)
- [Broker] Fix retentionpolicies types mismatch. by @technoboy- in [#18114](https://github.com/apache/pulsar/pull/18114)
- [Broker] Tokenauthenticationstate: authenticate token only once by @michaeljmarshall in [#19314](https://github.com/apache/pulsar/pull/19314)
- [Broker] Make consumer#equals more effective by @shawyeok in [#18662](https://github.com/apache/pulsar/pull/18662)
- [Broker] Fix namespace deletion if __change_events topic has not been created yet by @nicoloboschi in [#18804](https://github.com/apache/pulsar/pull/18804)
- [Broker] Fix can not delete namespace by force by @liangyepianzhou in [#18307](https://github.com/apache/pulsar/pull/18307)
- [Broker] Replace pulsarservice mockito spy solution for overriding getters in tests by @lhotari in [#19323](https://github.com/apache/pulsar/pull/19323)
- [Broker] Fix issue where leader broker information isn't available after 10 minutes by @lhotari in [#17401](https://github.com/apache/pulsar/pull/17401)
- [Broker] Replace authenticate with authenticateasync by @michaeljmarshall in [#19313](https://github.com/apache/pulsar/pull/19313)
- [Broker] Add  uncaughtexceptionhandler for every thread pool by @315157973 in [#18211](https://github.com/apache/pulsar/pull/18211)
- [Broker] Topics stats shows msgbacklog but there reality no backlog by @poorbarcode in [#19275](https://github.com/apache/pulsar/pull/19275)
- [Broker] Only create extended partitions when updating partition number by @anonhxy in [#17349](https://github.com/apache/pulsar/pull/17349)
- [Broker] Let tokenauthstate update authenticationdatasource by @michaeljmarshall in [#19282](https://github.com/apache/pulsar/pull/19282)
- [Broker] Eagerly delete offloaded segments on topic deletion by @dlg99 in [#17915](https://github.com/apache/pulsar/pull/17915)
- [Broker] Documentation for authenticationstate contract by @michaeljmarshall in [#19283](https://github.com/apache/pulsar/pull/19283)
- [Broker] Allow to use io_uring instead of epoll by @coderzc in [#18385](https://github.com/apache/pulsar/pull/18385)
- [Broker] Using topicname instead of string as the parameter for `gettopic`. by @technoboy- in [#17416](https://github.com/apache/pulsar/pull/17416)
- [Broker] Skip creating a subscription replication snapshot if no messages have been published after the topic gets activated on a broker by @lhotari in [#16618](https://github.com/apache/pulsar/pull/16618)
- [Broker] Avoid bundle unload destination broker be set as an inactive broker. by @nicklee007 in [#19244](https://github.com/apache/pulsar/pull/19244)
- [Broker] Update authenticationprovider to simplify http authn by @michaeljmarshall in [#19197](https://github.com/apache/pulsar/pull/19197)
- [Broker] Reduce getreplicatedsubscriptionstatus local rest call by @anonhxy in [#16946](https://github.com/apache/pulsar/pull/16946)
- [Broker] Improve tls config on replication client and cluster cli by @nodece in [#17295](https://github.com/apache/pulsar/pull/17295)
- [Broker] Persist correct markdeleteposition to prevent message loss by @michaeljmarshall in [#18237](https://github.com/apache/pulsar/pull/18237)
- [Broker] Implement delayed message index bucket snapshot(merge/delete) - part8 by @coderzc in [#19138](https://github.com/apache/pulsar/pull/19138)
- [Broker] Deprecate blocking authorizationservice, authorizationprovider methods by @michaeljmarshall in [#19180](https://github.com/apache/pulsar/pull/19180)
- [Broker] Allow user lookup topic name with `-partition-` but no metadata by @mattisonchao in [#19171](https://github.com/apache/pulsar/pull/19171)
- [Broker] Add ref count for sticky hash to optimize the performance of key_shared subscription by @codelipenghui in [#19167](https://github.com/apache/pulsar/pull/19167)
- [Broker] Copy proto command fields into final variables in servercnx by @michaeljmarshall in [#18987](https://github.com/apache/pulsar/pull/18987)
- [Broker] Add parameter check for create/update cluster. by @mattisonchao in [#19151](https://github.com/apache/pulsar/pull/19151)
- [Broker] In the trimdeletedentries method, release the removed entry by @lordcheng10 in [#18305](https://github.com/apache/pulsar/pull/18305)
- [Broker] Remove locallyacquiredlock when removeownership by @leizhiyuan in [#18197](https://github.com/apache/pulsar/pull/18197)
- [Broker] Support setting `forcedeletetenantallowed` dynamically by @technoboy- in [#18192](https://github.com/apache/pulsar/pull/18192)
- [Broker] Use channelvoidpromise to avoid useless promise objects creation by @nicoloboschi in [#19141](https://github.com/apache/pulsar/pull/19141)
- [Broker] Fix clusterdataimpl#clone and add test by @michaeljmarshall in [#19126](https://github.com/apache/pulsar/pull/19126)
- [Broker] Fix invalid metric type "gauge " by @coderzc in [#18129](https://github.com/apache/pulsar/pull/18129)
- [Broker] Fix ttl expiration block due to no-recoverable exception even if autoskipnonrecoverabledata=true by @aloyszhang in [#19132](https://github.com/apache/pulsar/pull/19132)
- [Broker] Update the log print content of createsubscriptions by @pomelongan in [#18024](https://github.com/apache/pulsar/pull/18024)
- [Broker] Fix the order of resource close in the inmemorydelayeddeliverytracker by @coderzc in [#18000](https://github.com/apache/pulsar/pull/18000)
- [Broker] Fix incorrect bundle split count metric by @shawyeok in [#17970](https://github.com/apache/pulsar/pull/17970)
- [Broker] Update authentication failed metrics report by @tuteng in [#17787](https://github.com/apache/pulsar/pull/17787)
- [Broker] Managedledger: move to fenced state in case of badversionexception by @eolivelli in [#17736](https://github.com/apache/pulsar/pull/17736)
- [Broker] Do not print error log with stacktrace for 404 by @codelipenghui in [#19130](https://github.com/apache/pulsar/pull/19130)
- [Broker] Fix executewithretry result is null by @coderzc in [#17694](https://github.com/apache/pulsar/pull/17694)
- [Broker] Fix cursor skip read by @coderzc in [#19124](https://github.com/apache/pulsar/pull/19124)
- [Broker] Fix can not revoke permission after update topic partition by @takahir07 in [#17393](https://github.com/apache/pulsar/pull/17393)
- [Broker] Add oshi library to help control os resources. by @mattisonchao in [#18990](https://github.com/apache/pulsar/pull/18990)
- [Broker] Implement filter out all delayed messages and skip them when reading messages from bookies - part7 by @coderzc in [#19035](https://github.com/apache/pulsar/pull/19035)
- [Broker] Fix missing return when internalgetreplicatedsubscriptionstatus by @hqebupt in [#19054](https://github.com/apache/pulsar/pull/19054)
- [Broker] Throw alreadyclosedexception while request to a closed metadata store by @codelipenghui in [#19055](https://github.com/apache/pulsar/pull/19055)
- [Broker] Fix thread safety issue in info-internal admin api for partitioned topics by @lhotari in [#19021](https://github.com/apache/pulsar/pull/19021)
- [Broker] Only get consumer future when interceptor not null by @michaeljmarshall in [#19022](https://github.com/apache/pulsar/pull/19022)
- [Broker] Use validatetopicoperationasync methods in all cases by @lhotari in [#19016](https://github.com/apache/pulsar/pull/19016)
- [Broker] Fix deadlock in pendingackhandleimpl by @nicoloboschi in [#18989](https://github.com/apache/pulsar/pull/18989)
- [Broker] Add javadoc for pulsardecoder handle* method parameter lifecycle by @lhotari in [#18998](https://github.com/apache/pulsar/pull/18998)
- [Broker] Fix direct memory leak in rawreaderimpl by @lhotari in [#18928](https://github.com/apache/pulsar/pull/18928)
- [Broker] Make it configurable to require subscription permission by @michaeljmarshall in [#15576](https://github.com/apache/pulsar/pull/15576)
- [Broker] Add config `fsyncenable` for `rocksdbmetadatastore` by @coderzc in [#18801](https://github.com/apache/pulsar/pull/18801)
- [Broker] Implement delayed message bucket snapshot recover - part5 by @coderzc in [#18420](https://github.com/apache/pulsar/pull/18420)
- [Broker] Remove the unused method internalgetlist from persistenttopicsbase by @codelipenghui in [#18775](https://github.com/apache/pulsar/pull/18775)
- [Broker] Fix duplicated schemas creation by @codelipenghui in [#18701](https://github.com/apache/pulsar/pull/18701)
- [Broker] Use correct file path for tls trust certificates by @michaeljmarshall in [#18712](https://github.com/apache/pulsar/pull/18712)
- [Broker] The interval of scheduled task should be greater than 0 by @yuruguo in [#18728](https://github.com/apache/pulsar/pull/18728)
- [Broker] Improve shadow topic error message by @labuladong in [#18709](https://github.com/apache/pulsar/pull/18709)
- [Broker] Combination of autocreate + forced delete of partitioned topic with active consumer leaves topic metadata inconsistent. by @dlg99 in [#18193](https://github.com/apache/pulsar/pull/18193)
- [Broker] System topic writer/reader connection not counted by @yuruguo in [#18603](https://github.com/apache/pulsar/pull/18603)
- [Broker] First judge whether config is null when standalone start by @yuruguo in [#18681](https://github.com/apache/pulsar/pull/18681)
- [Broker] Fix thread-safety issue with currentledgerentries and currentledgersize fields by @lhotari in [#17868](https://github.com/apache/pulsar/pull/17868)
- [Broker] Fix namespace not found will cause request timeout by @labuladong in [#18512](https://github.com/apache/pulsar/pull/18512)
- [Broker] Avoid share same random in multi-threads due to performance issue by @shawyeok in [#18660](https://github.com/apache/pulsar/pull/18660)
- [Broker] System topic writer/reader connection not counted. by @technoboy- in [#18369](https://github.com/apache/pulsar/pull/18369)
- [Broker] Implement bookkeeperbucketsnapshotstorage - part3 by @coderzc in [#17677](https://github.com/apache/pulsar/pull/17677)
- [Broker] Support internal cursor properties - part4 by @coderzc in [#17712](https://github.com/apache/pulsar/pull/17712)
- [Broker] Avoid unnecessary creation of bitsetrecyclable objects by @lordcheng10 in [#17998](https://github.com/apache/pulsar/pull/17998)
- [Broker] Fix broker cache eviction of entries read by active cursors by @lhotari in [#17273](https://github.com/apache/pulsar/pull/17273)
- [Broker] Add return for persistentmessageexpirymonitor#findentryfailed by @pomelongan in [#17816](https://github.com/apache/pulsar/pull/17816)
- [Broker] Fix create ns by @nodece in [#17864](https://github.com/apache/pulsar/pull/17864)
- [Broker] Dnsresolverutil.ttl should be greater than zero by @technoboy- in [#18565](https://github.com/apache/pulsar/pull/18565)
- [Broker] Make managedledgeroffloadedreadpriority compatible with broker property by @ethqunzhong in [#17803](https://github.com/apache/pulsar/pull/17803)
- [Broker] Remove legacy code by @aloyszhang in [#18330](https://github.com/apache/pulsar/pull/18330)
- [Broker] Remove duplicate code to improve delete subscription by @nodece in [#15347](https://github.com/apache/pulsar/pull/15347)
- [Broker] Fix issue where logs get truncated when runtime.halt is used to terminate the process by @lhotari in [#17589](https://github.com/apache/pulsar/pull/17589)
- [Broker] Add missing @test annotation by @michaeljmarshall in [#18528](https://github.com/apache/pulsar/pull/18528)
- [Broker] Unreasonable authenticationexception reference by @zzccctv in [#18502](https://github.com/apache/pulsar/pull/18502)
- [Broker] Remove useless argument for persistenttopicbase.internalskipallmessagesfornonpartitionedtopicasync by @poorbarcode in [#18473](https://github.com/apache/pulsar/pull/18473)
- [Broker] Using `handle` instead of `handleasync` to avoid using common pool thread by @technoboy- in [#17403](https://github.com/apache/pulsar/pull/17403)
- [Broker] In overloadshedder, repeatedly filter local bundles by @lordcheng10 in [#18463](https://github.com/apache/pulsar/pull/18463)
- [Broker] Fix outofdirectmemoryerror in standalone with zk by @labuladong in [#18337](https://github.com/apache/pulsar/pull/18337)
- [Broker] Enable_io_uring property name by @coderzc in [#18402](https://github.com/apache/pulsar/pull/18402)
- [Broker] Provide readable consumer stats time by @rdhabalia in [#14251](https://github.com/apache/pulsar/pull/14251)
- [Broker] Fix delete_when_subscriptions_caught_up doesn't work while have active consumers by @codelipenghui in [#18283](https://github.com/apache/pulsar/pull/18283)
- [Broker] Support `autosubscriptioncreation` on topic level by @yuruguo in [#17720](https://github.com/apache/pulsar/pull/17720)
- [Broker] Avoid object create in `redeliverytracker.getredeliverycount` by @lifepuzzlefun in [#18352](https://github.com/apache/pulsar/pull/18352)
- [Broker] Remove check ack.getmessageidscount() == 1 for cumulative ack by @anonhxy in [#18333](https://github.com/apache/pulsar/pull/18333)
- [Broker] Fix repeated messages of shared streaming dispatcher by @poorbarcode in [#18289](https://github.com/apache/pulsar/pull/18289)
- [Broker] Cleanup unused method: isslowestreader by @lordcheng10 in [#18306](https://github.com/apache/pulsar/pull/18306)
- [Broker] Get lowest positionimpl from navigableset by @lifepuzzlefun in [#18278](https://github.com/apache/pulsar/pull/18278)
- [Broker] Remove duplicate sendsuccess and senderror in pulsarcommandsender by @lifepuzzlefun in [#18250](https://github.com/apache/pulsar/pull/18250)
- [Broker] Cleanup localstore from namespaceresources by @anonhxy in [#18258](https://github.com/apache/pulsar/pull/18258)
- [Broker] Cleanup namespaceservice by @anonhxy in [#18259](https://github.com/apache/pulsar/pull/18259)
- [Broker] Make compactedtopicimpl.findstartpointloop work more efficiently by @poorbarcode in [#17976](https://github.com/apache/pulsar/pull/17976)
- [Broker] Do not serialize field bundlestats by @thetumbled in [#18150](https://github.com/apache/pulsar/pull/18150)
- [Broker] Implement delayed message index bucket snapshot (create/load) - part2 by @coderzc in [#17611](https://github.com/apache/pulsar/pull/17611)
- [Broker] Fix flaky test: prometheusmetricstest.testduplicatemetrictypedefinitions by @nicoloboschi in [#18077](https://github.com/apache/pulsar/pull/18077)
- [Broker] Avoid runtime check hasfilter in entryfiltersupport by @anonhxy in [#18066](https://github.com/apache/pulsar/pull/18066)
- [Broker] Remove methods no longer used in adminresource #7 by @pomelongan in [#17969](https://github.com/apache/pulsar/pull/17969)
- [Broker] Delete unuse metrics of zk_write_latency and zk_read_latency by @liangyuanpeng in [#17505](https://github.com/apache/pulsar/pull/17505)
- [Broker] Servercnx: log at warning level when topic not found by @michaeljmarshall in [#16225](https://github.com/apache/pulsar/pull/16225)
- [Broker] Set log level to `warn` when topic policy reader occurs alreadyclosedexception by @technoboy- in [#17841](https://github.com/apache/pulsar/pull/17841)
- [Broker] Add config to count filtered entries towards rate limits by @michaeljmarshall in [#17686](https://github.com/apache/pulsar/pull/17686)
- [Broker] Fix unexpected subscription deletion caused by the cursor last active time not updated in time by @dragonls in [#17573](https://github.com/apache/pulsar/pull/17573)
- [Broker] Remove unnecessary variable in persistenttopic by @poorbarcode in [#17511](https://github.com/apache/pulsar/pull/17511)
- [Broker] Make cursor properties support modify single value concurrently. by @coderzc in [#17164](https://github.com/apache/pulsar/pull/17164)
- [Broker] Do not log stacktrace for 'failed to flush mark-delete position' case by @eolivelli in [#17432](https://github.com/apache/pulsar/pull/17432)
- [Broker] New bucket based delayed message tracker - interface&config&proto -part 1 by @coderzc in [#17344](https://github.com/apache/pulsar/pull/17344)
- [Broker] Refactor reflection method in delayed and service module by @hqebupt in [#17347](https://github.com/apache/pulsar/pull/17347)
- [Broker] Remove unnecessary parameters(reusefuture) and related logic by @pomelongan in [#17378](https://github.com/apache/pulsar/pull/17378)
- [Broker] Fix npe when updating topic properties by @flowermin in [#17352](https://github.com/apache/pulsar/pull/17352)
- [Broker] Refactor reflection method in loadbalance module by @hqebupt in [#17313](https://github.com/apache/pulsar/pull/17313)
- [Broker] Make deletepersistence method async in namespaces by @pomelongan in [#17206](https://github.com/apache/pulsar/pull/17206)
- [Broker] Add maven modernizer plugin in pulsar-broker and fix violation in `test: broker/admin` by @youzipi in [#16993](https://github.com/apache/pulsar/pull/16993)
- [Broker] Remove unused code by @lordcheng10 in [#17036](https://github.com/apache/pulsar/pull/17036)

### Clients

- [Client] Pip-224: add getlastmessageids api by @bewaremypower in [#20040](https://github.com/apache/pulsar/pull/20040)
- [Client] Refactor client version format by @robertindie in [#19643](https://github.com/apache/pulsar/pull/19643)
- [Client] Fix authentication not update after changing the serviceurl by @hangc0276 in [#19510](https://github.com/apache/pulsar/pull/19510)
- [Client] Fix load the trust store file by @nodece in [#19483](https://github.com/apache/pulsar/pull/19483)
- [Client] Pip-229: add a common interface to get fields of messageiddata by @bewaremypower in [#19414](https://github.com/apache/pulsar/pull/19414)
- [Client] Fix async method composition in admin client's namespacesimpl by @lhotari in [#19397](https://github.com/apache/pulsar/pull/19397)
- [Client] Fix async completion in consumerimpl#processpossibletodlq by @lhotari in [#19392](https://github.com/apache/pulsar/pull/19392)
- [Client] Change default threads from 1 to available processors by @codelipenghui in [#19059](https://github.com/apache/pulsar/pull/19059)
- [Client] Retry letter producer respect auto schema by @tisonkun in [#19051](https://github.com/apache/pulsar/pull/19051)
- [Client] Add unified newtableview method in pulsarclient by @yuruguo in [#19048](https://github.com/apache/pulsar/pull/19048)
- [Client] Check topic pattern when creating consumer by @yuruguo in [#19029](https://github.com/apache/pulsar/pull/19029)
- [Client] Prevent dns reverse lookup when physical address is an ip address by @lhotari in [#19028](https://github.com/apache/pulsar/pull/19028)
- [Client] Consumerbuilder.java comments by @mendonk in [#18706](https://github.com/apache/pulsar/pull/18706)
- [Client] For exclusive subscriptions, if two consumers are created repeatedly, the second consumer will block by @lordcheng10 in [#18633](https://github.com/apache/pulsar/pull/18633)
- [Client] Move acknowledge apis to another interface and improve docs by @bewaremypower in [#18519](https://github.com/apache/pulsar/pull/18519)
- [Client] Avoid allocating unused buffer when receiving chunk message by @robertindie in [#18511](https://github.com/apache/pulsar/pull/18511)
- [Client] Fix multi-topic consumer stuck after redeliver messages by @poorbarcode in [#18491](https://github.com/apache/pulsar/pull/18491)
- [Client] Fix the note of seek in the consumer by @robertindie in [#18476](https://github.com/apache/pulsar/pull/18476)
- [Client] Fix failover/exclusive consumer with batch cumulate ack issue. by @technoboy- in [#18454](https://github.com/apache/pulsar/pull/18454)
- [Client] Change the get lastmessageid to debug level by @zymap in [#18421](https://github.com/apache/pulsar/pull/18421)
- [Client] Fix the windows absolute path not recognized in auth param string by @bewaremypower in [#18403](https://github.com/apache/pulsar/pull/18403)
- [Client] Fix exception when calling loadconf on a consumerbuilder that has a keysharedpolicy by @cbornet in [#18345](https://github.com/apache/pulsar/pull/18345)
- [Client] Support localdatetime conversion by @coderzc in [#18334](https://github.com/apache/pulsar/pull/18334)
- [Client] Reduce duplicate code in consumerbuilderimpl by @pomelongan in [#18325](https://github.com/apache/pulsar/pull/18325)
- [Client] Pip-218: consumer batchreceive() single partition every receive by @congbobo184 in [#18316](https://github.com/apache/pulsar/pull/18316)
- [Client] Fix `illegalthreadstateexception` when using newthread in `executorprovider.extendedthreadfactory` by @coderzc in [#18268](https://github.com/apache/pulsar/pull/18268)
- [Client] Fix pendinglookuprequestsemaphore leak when serâ€¦ by @shoothzj in [#18219](https://github.com/apache/pulsar/pull/18219)
- [Client] When namespace is deleted, the client is constantly reconnecting by @poorbarcode in [#18194](https://github.com/apache/pulsar/pull/18194)
- [Client] Remove unused check for topics isempty by @anonhxy in [#18185](https://github.com/apache/pulsar/pull/18185)
- [Client] Remove useless locks in batch receiving by @shibd in [#18005](https://github.com/apache/pulsar/pull/18005)
- [Client] When the compressed message size exceeds maxmessagesize, the information in the invalidmessageexception may be incorrect by @lordcheng10 in [#17910](https://github.com/apache/pulsar/pull/17910)
- [Client] Fix deadlock when sending chunked messages with blockifqueuefull enabled by @robertindie in [#17795](https://github.com/apache/pulsar/pull/17795)
- [Client] Optimize the ack/send future in transactionimpl by @liangyepianzhou in [#17777](https://github.com/apache/pulsar/pull/17777)
- [Client] Remove redundant pending messages information while print the producer stats by @codertmy in [#17671](https://github.com/apache/pulsar/pull/17671)
- [Client] Messages with inconsistent consumer epochs are not filtered when using batch receive and trigger timeout. by @shibd in [#17318](https://github.com/apache/pulsar/pull/17318)
- [Client] Improve docs and code quality about keyvalueschema usages by @bewaremypower in [#17256](https://github.com/apache/pulsar/pull/17256)


### Pulsar IO and Pulsar Functions

- [Function] Supply download auth params when provided for k8s runtime by @michaeljmarshall in [#20144](https://github.com/apache/pulsar/pull/20144)
- [Function] Make /version return correct version by @michaeljmarshall in [#20047](https://github.com/apache/pulsar/pull/20047)
- [Function] Use authorizationserver more in function worker api by @michaeljmarshall in [#19975](https://github.com/apache/pulsar/pull/19975)
- [Function] Allow download link with basic auth by @vanhtuan0409 in [#19750](https://github.com/apache/pulsar/pull/19750)
- [Function] Fix k8s merge runtime opts bug by @michaeljmarshall in [#19481](https://github.com/apache/pulsar/pull/19481)
- [Function] Support .nar files without explicit directory entries by @lhotari in [#19304](https://github.com/apache/pulsar/pull/19304)
- [Function] Fix tls configuration for fn worker to broker if auth disabled by @nicoloboschi in [#19290](https://github.com/apache/pulsar/pull/19290)
- [Function] Support reading config options from file in function python runner by @tpiperatgod in [#18951](https://github.com/apache/pulsar/pull/18951)
- [Function] Support processingguarantees "effectively_once" in python function  by @tpiperatgod in [#18929](https://github.com/apache/pulsar/pull/18929)
- [Function] Typo in method name by @tisonkun in [#18844](https://github.com/apache/pulsar/pull/18844)
- [Function] Support e2e cryption in python instance  by @jiangpengcheng in [#18738](https://github.com/apache/pulsar/pull/18738)
- [Function] Support schema in python instance by @jiangpengcheng in [#18432](https://github.com/apache/pulsar/pull/18432)
- [Function] Support subscriptionposition in python instance by @jiangpengcheng in [#18431](https://github.com/apache/pulsar/pull/18431)
- [Function] Kca connectors: fix missing runtime dependencies by @nicoloboschi in [#18370](https://github.com/apache/pulsar/pull/18370)
- [Function] Fix function failed to start if no `typeclassname` provided in `functiondetails` by @freeznet in [#18111](https://github.com/apache/pulsar/pull/18111)
- [Function] Do not delete managed package when delete function by @jiangpengcheng in [#18030](https://github.com/apache/pulsar/pull/18030)
- [Function] Fix builtin sink transformation on k8s by @cbornet in [#18019](https://github.com/apache/pulsar/pull/18019)
- [Function] Jdbc sink: add flag to exclude non declared fields by @nicoloboschi in [#18008](https://github.com/apache/pulsar/pull/18008)
- [Function] Fix the download of builtin functions by @cbornet in [#17877](https://github.com/apache/pulsar/pull/17877)
- [Function] Fix k8s download function method with auth enabled by @nicoloboschi in [#17597](https://github.com/apache/pulsar/pull/17597)
- [Function] Add admin cli command to get available built-in functions by @cbornet in [#16822](https://github.com/apache/pulsar/pull/16822)
- [Function] Remove unused code by @cbornet in [#16472](https://github.com/apache/pulsar/pull/16472)
- [Connector] Remove kafka-connect-avro-converter-shaded by @tisonkun in [#19468](https://github.com/apache/pulsar/pull/19468)
- [Connector] Keep new inputspecs when updating sink configs by @aymkhalil in [#19082](https://github.com/apache/pulsar/pull/19082)
- [Connector] Upgrade kafka client, connect runtime to 2.8.2 and confluent version to 6.2.8 by @lhotari in [#19010](https://github.com/apache/pulsar/pull/19010)
- [Connector] Reduce dependencies of pulsar-io-common module by @nicoloboschi in [#19000](https://github.com/apache/pulsar/pull/19000)
- [Connector] Elasticsearch sink: support loading config from secrets by @alpreu in [#18986](https://github.com/apache/pulsar/pull/18986)
- [Connector] Kca connectors: fix missing runtime dependencies by @nicoloboschi in [#18370](https://github.com/apache/pulsar/pull/18370)
- [Connector] Jdbc sinks: implement jdbc batch api by @nicoloboschi in [#18017](https://github.com/apache/pulsar/pull/18017)
- [Connector] Add option to copy kafka headers to pulsar properties by @aymkhalil in [#17829](https://github.com/apache/pulsar/pull/17829)
- [Connector] Upgrade hadoop client to 3.3.3 and 2.10.2 by @codelipenghui in [#17727](https://github.com/apache/pulsar/pull/17727)
- [Connector] Support transform function with localrunner by @cbornet in [#17445](https://github.com/apache/pulsar/pull/17445)
- [Connector] Fix outputrecordsinkrecord getvalue and getschema by @cbornet in [#17434](https://github.com/apache/pulsar/pull/17434)
- [Connector] Elasticsearch sink: add a option to copy key fields into the value by @nicoloboschi in [#17117](https://github.com/apache/pulsar/pull/17117)
- [Connector] Add support for a transform function in sinks by @cbornet in [#16740](https://github.com/apache/pulsar/pull/16740)
- [Connector] Kca: handle kafka's logical schemas by @dlg99 in [#16485](https://github.com/apache/pulsar/pull/16485)
- [Connector] Add support for full message synchronization by @shink in [#16003](https://github.com/apache/pulsar/pull/16003)


### Observability

- [Metrics] Fix the partitioned publisher topic stat aggregation bug by @heesung-sn in [#18807](https://github.com/apache/pulsar/pull/18807)
- [Metrics] Fix reporting pulsar_subscription_blocked_on_unacked_messages metric by @aymkhalil in [#18621](https://github.com/apache/pulsar/pull/18621)
- [Metrics] Correctly set byte and message out totals per subscription by @pgier in [#18451](https://github.com/apache/pulsar/pull/18451)
- [Metrics] Wrong metrics text generated when label_cluster specified by @poorbarcode in [#17704](https://github.com/apache/pulsar/pull/17704)
- [Metrics] Remove timestamp from prometheus metrics by @michaeljmarshall in [#17419](https://github.com/apache/pulsar/pull/17419)
- [Metrics] Add metrics for batchmetadatastore by @tjiuming in [#17072](https://github.com/apache/pulsar/pull/17072)
- [Metrics] Add metadata store metrics by @tjiuming in [#17041](https://github.com/apache/pulsar/pull/17041)
- [Metrics] Pip-160 metrics stats of transaction buffered writer by @poorbarcode in [#16758](https://github.com/apache/pulsar/pull/16758)
- [Metrics] Add limitstatslogging configuration when enable bookkeeperclientexposestatstoprometheus by @takahir07 in [#16734](https://github.com/apache/pulsar/pull/16734)
- [Metrics] Ensure prometheus metrics are grouped by type (#8407, #13865) by @marksilcox in [#15558](https://github.com/apache/pulsar/pull/15558)
- [Metrics] Add metrics for transaction by @tjiuming in [#15140](https://github.com/apache/pulsar/pull/15140)


### CLI

- [Pulsar Admin] Use authenticationparameters for rest producer by @michaeljmarshall in [#20046](https://github.com/apache/pulsar/pull/20046)
- [Pulsar Admin] Use authorizationserver more in function worker api by @michaeljmarshall in [#19975](https://github.com/apache/pulsar/pull/19975)
- [Pulsar Admin] Fix incorrect state replication.connected on api partitioned-topic stat by @poorbarcode in [#19942](https://github.com/apache/pulsar/pull/19942)
- [Pulsar Admin] Fix delete tenant by @nodece in [#19925](https://github.com/apache/pulsar/pull/19925)
- [Pulsar Admin] Filter pending ack topic while deleting the namespace by @gaoran10 in [#19719](https://github.com/apache/pulsar/pull/19719)
- [Pulsar Admin] Fix create-subscription command --subscription description by @yangl in [#19591](https://github.com/apache/pulsar/pull/19591)
- [Pulsar Admin] Allow proxy to pass same role for authrole and originalrole by @michaeljmarshall in [#19557](https://github.com/apache/pulsar/pull/19557)
- [Pulsar Admin] Fix async method composition in admin client's namespacesimpl by @lhotari in [#19397](https://github.com/apache/pulsar/pull/19397)
- [Pulsar Admin] Make the default value of param --get-subscription-backlog-size of admin api topics stats true by @poorbarcode in [#19302](https://github.com/apache/pulsar/pull/19302)
- [Pulsar Admin] Fix race condition while updating partition number by @mattisonchao in [#19199](https://github.com/apache/pulsar/pull/19199)
- [Pulsar Admin] Improve partitioned-topic condition evaluation by @gaozhangmin in [#19015](https://github.com/apache/pulsar/pull/19015)
- [Pulsar Admin] Internalgetmessagebyid shouldn't be allowed on partitioned topic by @gaozhangmin in [#19013](https://github.com/apache/pulsar/pull/19013)
- [Pulsar Admin] Optimize the logic of internalcreatepartitionedtopic by @pomelongan in [#18666](https://github.com/apache/pulsar/pull/18666)
- [Pulsar Admin] Set authentication when using loadconf in client and admin client by @onobc in [#18358](https://github.com/apache/pulsar/pull/18358)
- [Pulsar Admin] Add offload managedledgeroffloadthreshold restapi and cli tools by @tjiuming in [#18218](https://github.com/apache/pulsar/pull/18218)
- [Pulsar Admin] Passing `force` parameter to `deletenamespacebundle` when delete namespaces by @coderzc in [#18153](https://github.com/apache/pulsar/pull/18153)
- [Pulsar Admin] Returns 4xx error when pulsar-worker-service is disabled and trying to access it by @heesung-sn in [#17901](https://github.com/apache/pulsar/pull/17901)
- [Pulsar Admin] Add command to list transaction coordinators by @nicoloboschi in [#17522](https://github.com/apache/pulsar/pull/17522)
- [Pulsar Admin] Namespace cli set-offload-policy's thresholdbytes support negative and 0 by @ethqunzhong in [#17502](https://github.com/apache/pulsar/pull/17502)
- [Pulsar Admin] Make setpersistence method async in namespaces by @pomelongan in [#17421](https://github.com/apache/pulsar/pull/17421)
- [Pulsar Admin] Make `getbundlerange` async by @technoboy- in [#17402](https://github.com/apache/pulsar/pull/17402)
- [Pulsar Admin] Improve `backlogquota` endpoint to pure async. by @mattisonchao in [#17383](https://github.com/apache/pulsar/pull/17383)
- [Pulsar Admin] Improve `replicatordispacherrate` endpoint to pure async. by @mattisonchao in [#17377](https://github.com/apache/pulsar/pull/17377)
- [Pulsar Admin] Pulsaradminbuilderimpl overrides timeout properties passed through config map by @technoboy- in [#17375](https://github.com/apache/pulsar/pull/17375)
- [Pulsar Admin] Fix npe thrown by splitbundle by @gaozhangmin in [#17370](https://github.com/apache/pulsar/pull/17370)
- [Pulsar Admin] Add cmd to remove topic properties by @yuruguo in [#17337](https://github.com/apache/pulsar/pull/17337)
- [Pulsar Admin] Add api for update topic properties by @anonhxy in [#17238](https://github.com/apache/pulsar/pull/17238)
- [Pulsar Admin] Make deletenamesapce api async by @gaozhangmin in [#17230](https://github.com/apache/pulsar/pull/17230)
- [Pulsar Admin] Cleanup unused param in provisionpartitionedtopicpath by @anonhxy in [#17156](https://github.com/apache/pulsar/pull/17156)
- [Pulsar Admin] Reduce code duplication in admin client by @andrasbeni in [#16377](https://github.com/apache/pulsar/pull/16377)
- [Pulsar Admin] Pulsar admin: reduce code duplication - part 4 by @eolivelli in [#13086](https://github.com/apache/pulsar/pull/13086)
- [Pulsar CLI] Fix pulsar admin tool is ignoring tls-trust-cert path arg by @rdhabalia in [#19696](https://github.com/apache/pulsar/pull/19696)
- [Pulsar CLI] Add read command to pulsar-client-tools by @massakam in [#19298](https://github.com/apache/pulsar/pull/19298)
- [Pulsar CLI] Pulsar cli: use return code 1 for general error by @pgier in [#18946](https://github.com/apache/pulsar/pull/18946)
- [Pulsar CLI] Pulsar-perf fails on jdk17 by @nicoloboschi in [#18806](https://github.com/apache/pulsar/pull/18806)
- [Pulsar CLI] Fix timeout behavior of reader perf by @labuladong in [#17882](https://github.com/apache/pulsar/pull/17882)
- [Pulsar CLI] Using separate tls config on the compactor by @nodece in [#17426](https://github.com/apache/pulsar/pull/17426)
- [Client Tool] Pulsar shell: ensure admin client is recycled or disposed by @nicoloboschi in [#17619](https://github.com/apache/pulsar/pull/17619)
- [Client Tool] Pulsar-perf produce add possibility to set eventtime on messages by @eolivelli in [#17189](https://github.com/apache/pulsar/pull/17189)
- [Client Tool] Pulsar-perf consume, do not fail in case of reading data older than 10 days by @eolivelli in [#17160](https://github.com/apache/pulsar/pull/17160)


### Others

- [Proxy] Refresh auth data if proxylookuprequests by @michaeljmarshall in [#20067](https://github.com/apache/pulsar/pull/20067)
- [Proxy] Only create connectionpool when needed by @michaeljmarshall in [#20062](https://github.com/apache/pulsar/pull/20062)
- [Proxy] Fix connection read timeout handling in pulsar proxy by @lhotari in [#20014](https://github.com/apache/pulsar/pull/20014)
- [Proxy] Proxyconnection should not call super.exceptioncaught by @michaeljmarshall in [#19990](https://github.com/apache/pulsar/pull/19990)
- [Proxy] Remove unnecessary executor callback; use assert by @michaeljmarshall in [#19670](https://github.com/apache/pulsar/pull/19670)
- [Proxy] Pip-250: add proxyversion to commandconnect by @michaeljmarshall in [#19618](https://github.com/apache/pulsar/pull/19618)
- [Proxy] Proxywithauthorizationtest remove san from test certs by @michaeljmarshall in [#19594](https://github.com/apache/pulsar/pull/19594)
- [Proxy] Allow proxy to pass same role for authrole and originalrole by @michaeljmarshall in [#19557](https://github.com/apache/pulsar/pull/19557)
- [Proxy] Fix using wrong client version in pulsar proxy by @robertindie in [#19540](https://github.com/apache/pulsar/pull/19540)
- [Proxy] Fix jks tls transport by @nodece in [#19485](https://github.com/apache/pulsar/pull/19485)
- [Proxy] Modify check waitingforpingresponse with volatile (#12615)" by @michaeljmarshall in [#19439](https://github.com/apache/pulsar/pull/19439)
- [Proxy] Only go to connecting state once by @michaeljmarshall in [#19331](https://github.com/apache/pulsar/pull/19331)
- [Proxy] Pip 97: implement for proxyconnection by @michaeljmarshall in [#19292](https://github.com/apache/pulsar/pull/19292)
- [Proxy] Remove unused authenticationdatasource variable by @michaeljmarshall in [#19278](https://github.com/apache/pulsar/pull/19278)
- [Proxy] Use channelvoidpromise to avoid useless promise objects creation by @nicoloboschi in [#19141](https://github.com/apache/pulsar/pull/19141)
- [Proxy] Prevent dns reverse lookup when physical address is an ip address by @lhotari in [#19028](https://github.com/apache/pulsar/pull/19028)
- [Proxy] Fix logging in shutdown when proxy shutdown by @coderzc in [#18622](https://github.com/apache/pulsar/pull/18622)
- [Proxy] Fix refresh client auth by @nodece in [#17831](https://github.com/apache/pulsar/pull/17831)
- [Proxy] Update proxy lookup throw exception type by @tuteng in [#17600](https://github.com/apache/pulsar/pull/17600)
- [Proxy] Fix producer info logging fails when proxyloglevel > 0 by @zengguan in [#17175](https://github.com/apache/pulsar/pull/17175)
- [Proxy] Support proxy limit maximum connections per ip by @mattisonchao in [#17167](https://github.com/apache/pulsar/pull/17167)
- [Proxy] Remove empty else code block when initialize setmetadatastoreurl  by @aloyszhang in [#17122](https://github.com/apache/pulsar/pull/17122)
- [Proxy] Use correct address for haproxymessage destination by @michaeljmarshall in [#16045](https://github.com/apache/pulsar/pull/16045)
- [Schema] Fix delete schema command doc by @congbobo184 in [#19411](https://github.com/apache/pulsar/pull/19411)
- [Schema] Fix schema get value doc problem by @congbobo184 in [#17740](https://github.com/apache/pulsar/pull/17740)
- [Schema] Fix producer/consume permission canâ€™t get v1/schema by @yuruguo in [#16018](https://github.com/apache/pulsar/pull/16018)


### Library updates

- Upgrade the bookkeeper dependency to 4.16.1 by @hangc0276 in [#20127](https://github.com/apache/pulsar/pull/20127)
- Upgrade snakeyaml version to 2.0 by @technoboy- in [#20085](https://github.com/apache/pulsar/pull/20085)
- Upgrade the bookkeeper dependency to 4.16.0 by @hangc0276 in [#20049](https://github.com/apache/pulsar/pull/20049)
- Upgrade bookkeeper to 4.15.4 by @zymap in [#19812](https://github.com/apache/pulsar/pull/19812)
- Upgrade the rocksdb version to 7.9.2 to keep sync with bookkeeper's rocksdb dependency by @hangc0276 in [#20072](https://github.com/apache/pulsar/pull/20072)
- Upgrade vertx to match bk's version (otherwise bk does not work) by @dlg99 in [#20070](https://github.com/apache/pulsar/pull/20070)
- Upgrade spring dependency to 5.3.26 to fix owasp dependency check by @lhotari in [#20029](https://github.com/apache/pulsar/pull/20029)
- Upgrade lombok to 1.8.26 by @merlimat in [#19426](https://github.com/apache/pulsar/pull/19426)
- Upgrade to zk 3.8.1 by @dlg99 in [#19425](https://github.com/apache/pulsar/pull/19425)
- Upgrade wildfly-elytron (used by debezium) to fix cve-2022-3143 by @dlg99 in [#19333](https://github.com/apache/pulsar/pull/19333)
- Upgrade netty to 4.1.87.final by @lhotari in [#19417](https://github.com/apache/pulsar/pull/19417)
- Upgrade spotbugs to a version with jdk 17 compatibility by @lhotari in [#19315](https://github.com/apache/pulsar/pull/19315)
- Upgrade kafka client to 3.4.0 to fix cve-2023-25194 by @massakam in [#19527](https://github.com/apache/pulsar/pull/19527)
- Upgrade dependency-check-maven plugin to fix broken owasp check by @lhotari in [#19170](https://github.com/apache/pulsar/pull/19170)
- Upgrade hbase to 2.4.15 by @sekikn in [#19249](https://github.com/apache/pulsar/pull/19249)
- Upgrade asf maven parent pom version to 29 by @lhotari in [#19165](https://github.com/apache/pulsar/pull/19165)
- Upgrade woodstox to 5.4.0 by @nicoloboschi in [#19041](https://github.com/apache/pulsar/pull/19041)
- Upgrade scala-library to get rid of cve-2022-36944 by @nicoloboschi in [#18021](https://github.com/apache/pulsar/pull/18021)
- Upgrade jettison to 1.5.3 by @nicoloboschi in [#19038](https://github.com/apache/pulsar/pull/19038)
- Upgrade debezium to 1.9.7 by @dlg99 in [#18465](https://github.com/apache/pulsar/pull/18465)
- Upgrade kafka client, connect runtime to 2.8.2 and confluent version to 6.2.8 by @lhotari in [#19010](https://github.com/apache/pulsar/pull/19010)
- Upgrade lombok to 1.18.24 by @lhotari in [#18604](https://github.com/apache/pulsar/pull/18604)
- Upgrade netty to 4.1.86.final and netty tcnative to 2.0.54.final by @lhotari in [#18599](https://github.com/apache/pulsar/pull/18599)
- Upgrade jacksonxml to 2.13.4 by @nicoloboschi in [#18020](https://github.com/apache/pulsar/pull/18020)
- Upgrade commons-text to 1.10.0 in the kinesis-sink by @nicoloboschi in [#18093](https://github.com/apache/pulsar/pull/18093)
- File tiered storage: upgrade jettison to get rid of cve-2022-40149 by @nicoloboschi in [#18022](https://github.com/apache/pulsar/pull/18022)
- Upgrade reload4j in file-system offloader by @nicoloboschi in [#17716](https://github.com/apache/pulsar/pull/17716)
- Upgrade openssl to version 1.1.1n by @robertindie in [#17538](https://github.com/apache/pulsar/pull/17538)
- Upgrade to latest docbot action by @maxsxu in [#17266](https://github.com/apache/pulsar/pull/17266)
- Upgrade hadoop client to 3.3.3 and 2.10.2 by @codelipenghui in [#17727](https://github.com/apache/pulsar/pull/17727)
- Upgrade prestosql to the first trino version by @tisonkun in [#16683](https://github.com/apache/pulsar/pull/16683)
